DataONE_Operations
==================

Utilities for administrative operations in DataONE.

Several of these utilities require administrative access to DataONE servers, and so
are not appropriate for general end-user use.


Documentation
-------------

* The `Wiki`_ at https://github.com/DataONEorg/DataONE_Operations/wiki

See also the operations docs in subversion:

* https://purl.dataone.org/operations/index.html


.. _Wiki: https://github.com/DataONEorg/DataONE_Operations/wiki


Installation
------------

Installs a locally editable version of the tools:

1. Checkout this project from GitHub

2. ``cd`` to the project

3. Create a virtual environment. If you have `direnv` installed, then the python virtual environment `venv` is created for you. Otherwise, `python -m venv venv`.

4.. ``pip install -U -e .``

Initialization
--------------

The scripts rely on configuration information that by default is located in::

  ${HOME}/.dataone/d1_config.json

A default config can be generated by running::

  python d1_admin_tools/d1_config.py -i


The Scripts
-----------

All scripts are meant to be run from a BASH command line (untested on windows), send output to stdout.
Output in text, json, xml is generally supported.

* ``d1hosts`` List DataONE CNs in an environment.
* ``d1resolve`` Resolve an identifier.
* ``d1sysmeta`` Retrieve system metadata given an identifier.
* ``d1nodes`` Show the list of nodes in an environment.
* ``d1fields`` Retrieves a list of fields from the specified solr core.
* ``d1facets`` Retrieves values for a solr field in the specified solr core.
* ``d1getpids`` Retrieves identifiers from metacat postgres and checks file system consistency.
* ``d1listobjects`` Run listObjects against a node with various filter options.
* ``d1delete`` Issues a call to CNCore.delete() for a single PID.
* ``d1archive`` Issues a call to CNCore.archive() for a single PID.
* ``d1indexqstat`` Retrieves counts from the index processor task queue.
* ``d1mnadmin`` Reset synchronization time, update MN node document
* ``d1logintoken`` Drive a webbrowser session to login to ORCID and receive a DataONE token
* ``d1verifytoken`` Given a token, decode and verify the signature


Code style
----------

See https://github.com/DataONEorg/d1_python#code-style

